"use strict";(self.webpackChunkkta_memory_game=self.webpackChunkkta_memory_game||[]).push([[866],{3980:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ae});var a=t(467),i=t(7075),o=t(4756),r=t.n(o),s=t(4914),l=t(9180),c=t(8606),d=t.n(c),u=t(5072),m=t.n(u),p=t(7825),g=t.n(p),h=t(7659),f=t.n(h),v=t(5056),b=t.n(v),x=t(540),y=t.n(x),k=t(1113),w=t.n(k),A=t(8972),T={};T.styleTagTransform=w(),T.setAttributes=b(),T.insert=f().bind(null,"head"),T.domAPI=g(),T.insertStyleElement=y(),m()(A.A,T),A.A&&A.A.locals&&A.A.locals;var I=t(4268),C={};C.styleTagTransform=w(),C.setAttributes=b(),C.insert=f().bind(null,"head"),C.domAPI=g(),C.insertStyleElement=y(),m()(I.A,C),I.A&&I.A.locals&&I.A.locals;const S=t.p+"images/helper.gif",M=t.p+"images/helper.png";var j=t(4848);const z=function(){var e=(0,l.useNavigate)(),n=(0,s.useState)(!1),t=(0,i.A)(n,2),a=t[0],o=t[1];return(0,j.jsx)("div",{className:"landing-container",children:(0,j.jsxs)("div",{className:"background-container",children:[(0,j.jsx)("div",{className:"start-gif1",onClick:function(){e("/game")}}),(0,j.jsx)("img",{src:S,alt:"Additional Control",className:"top-left-gif",onClick:function(){return o(!0)}}),a&&(0,j.jsxs)("div",{className:"second-image-container",children:[(0,j.jsx)("button",{className:"close-button",onClick:function(){return o(!1)},children:"✖"}),(0,j.jsx)("img",{src:M,alt:"Second Image",className:"second-image"})]})]})})};var L=t(3029),R=t(2901),D=t(388),P=t(3954),E=t(5361),N=t(4467),G=t(4325),U={};U.styleTagTransform=w(),U.setAttributes=b(),U.insert=f().bind(null,"head"),U.domAPI=g(),U.insertStyleElement=y(),m()(G.A,U),G.A&&G.A.locals&&G.A.locals;const B=t.p+"images/tile1.png",V=t.p+"images/tile2.png",F=t.p+"images/tile3.png",_=t.p+"audio/match.mp3",H=t.p+"audio/noMatch.mp3",O=t.p+"audio/bg.wav",$=t.p+"audio/cheers.mp3",W=t.p+"images/off.png",K=t.p+"images/on.png",q=t.p+"images/hard.jpg",J=t.p+"images/easy.jpg",Q=t.p+"images/medium.jpg",X=t.p+"images/zero.jpg";function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}const Z=function(e){function n(e){var t,a,i,o;return(0,L.A)(this,n),a=this,i=n,o=[e],i=(0,P.A)(i),t=(0,D.A)(a,Y()?Reflect.construct(i,o||[],(0,P.A)(a).constructor):i.apply(a,o)),(0,N.A)(t,"handleUserInteraction",(function(){t.state.isMuted||t.bgMusicPlayer.play(),document.removeEventListener("click",t.handleUserInteraction)})),(0,N.A)(t,"toggleMute",(function(){var e=t.state.isMuted;e?t.bgMusicPlayer.play():t.bgMusicPlayer.pause(),t.setState({isMuted:!e})})),(0,N.A)(t,"startTimer",(function(){t.timerInterval=setInterval((function(){t.setState((function(e){return{timer:e.timer+1}}))}),1e3)})),(0,N.A)(t,"initializeGameData",(function(){var e=t.props.tileDistributions;!t.initialize&&e.length>0&&(console.log("Initializing game data..."),t.initialize=!0,t.setupGame())})),(0,N.A)(t,"setupGame",(function(){var e=t.state,n=e.tileDistributions,a=e.currentDistributionIndex;if(0!==n.length)if(a>=n.length)t.endGame();else{var i=n[a],o=[B,V,F],r=i.concat(i),s=t.getRandomImages(r.length,o);r.forEach((function(e,n){r[n]=s[n]}));var l=i.concat(i);t.shuffleArray(l);var c=document.getElementById("game-board");c.innerHTML="",r.forEach((function(e,n){var a=document.createElement("div");a.classList.add("tile"),a.dataset.tile=e,a.style.backgroundImage="url(".concat(e,")");var i=l[n];a.dataset.tamilChar=i,a.addEventListener("click",(function(){return t.handleTileClick(a)})),c.appendChild(a)})),t.setState({matchedPairs:0,firstTile:null,secondTile:null,lockBoard:!1,startTime:(new Date).getTime()})}else console.error("Tile distributions are not available.")})),(0,N.A)(t,"shuffleArray",(function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}})),(0,N.A)(t,"getRandomImages",(function(e,n){for(var t=[],a=n.length,i=0;i<e/2;i++){var o=n[Math.floor(Math.random()*a)];t.push(o,o)}return t.sort((function(){return Math.random()-.5}))})),(0,N.A)(t,"getCompletionImage",(function(){var e=t.state,n=e.score,a=e.complexity;if(0===n)return X;switch(null==a?void 0:a.toLowerCase()){case"easy":return J;case"mid":return Q;case"hard":return q;default:return X}})),(0,N.A)(t,"handleTileClick",(function(e){var n=t.state,a=n.lockBoard,i=n.firstTile;a||e===i||e.classList.contains("matched")||(e.classList.add("flipped"),e.style.backgroundColor="white",e.style.backgroundImage="none",e.innerText=e.dataset.tamilChar,i?t.setState({secondTile:e},t.checkForMatch):t.setState({firstTile:e}))})),(0,N.A)(t,"checkForMatch",(function(){var e=t.state,n=e.firstTile,a=e.secondTile;t.setState({lockBoard:!0}),n.dataset.tamilChar===a.dataset.tamilChar?(t.playSound(_),t.disableTiles()):(t.playSound(H),t.unflipTiles())})),(0,N.A)(t,"playSound",(function(e){new Audio(e).play()})),(0,N.A)(t,"disableTiles",(function(){var e=t.state,n=e.firstTile,a=e.secondTile,i=e.matchedPairs,o=e.tileDistributions,r=e.currentDistributionIndex;n.classList.add("matched"),a.classList.add("matched"),n.removeEventListener("click",t.handleTileClick),a.removeEventListener("click",t.handleTileClick);var s=i+1;t.setState({matchedPairs:s}),s!==o[r].length?t.resetBoard():t.setState({currentDistributionIndex:r+1},t.setupGame)})),(0,N.A)(t,"unflipTiles",(function(){var e=t.state,n=e.firstTile,a=e.secondTile;setTimeout((function(){n.innerText="",a.innerText="",n.classList.remove("flipped"),a.classList.remove("flipped"),n.style.backgroundImage="url(".concat(n.dataset.tile,")"),a.style.backgroundImage="url(".concat(a.dataset.tile,")"),t.resetBoard()}),1e3)})),(0,N.A)(t,"resetBoard",(function(){t.setState({firstTile:null,secondTile:null,lockBoard:!1})})),(0,N.A)(t,"endGame",(function(){t.state.gameCompleted||(clearInterval(t.timerInterval),t.setState({gameCompleted:!0}),setTimeout((function(){t.bgMusicPlayer.pause(),t.cheersSoundPlayed||(t.cheersSound.play(),t.cheersSoundPlayed=!0),t.setState({showCompletion:!0})}),2e3),t.sendGameResult())})),(0,N.A)(t,"sendGameResult",(function(){var e=t.state,n=e.timer,a=e.levelValue,i=e.complexity,o=0;switch(console.log("Timer: ".concat(n,", Complexity: ").concat(i)),null==i?void 0:i.toLowerCase()){case"easy":o=Math.max(0,20-Math.floor(Math.max(0,(n-50)/5)));break;case"mid":o=Math.max(0,30-Math.floor(Math.max(0,(n-60)/5)));break;case"hard":o=Math.max(0,50-Math.floor(Math.max(0,(n-70)/5)));break;default:o=0}console.log("Final Score: ".concat(o)),t.setState({score:o},(function(){var e={type:"levelComplete",data:{level:a,timeTaken:n,points:o}};console.log("Game Result:",e),window.parent.postMessage(e,"*")}))})),(0,N.A)(t,"handleCompletionImageClick",(function(){t.setState({showCompletion:!1})})),(0,N.A)(t,"handleHelperImageClick",(function(){t.setState((function(e){return{showSecondImage:!e.showSecondImage}}))})),t.state={tileDistributions:e.tileDistributions||[],levelValue:e.levelValue||1,currentDistributionIndex:0,complexity:e.complexity||"Unknown",firstTile:null,secondTile:null,lockBoard:!1,matchedPairs:0,startTime:null,timer:0,showSecondImage:!1,isMuted:!1,gameCompleted:!1,totalTimeTaken:0,showCompletion:!1,score:0,gameOver:!1},t.initialize=!1,t.timerInterval=null,t.bgMusicPlayer=new Audio(O),t.bgMusicPlayer.loop=!0,t.cheersSound=new Audio($),t}return(0,E.A)(n,e),(0,R.A)(n,[{key:"componentDidMount",value:function(){var e=this;this.initializeGameData(),this.startTimer(),this.timerInterval=setInterval((function(){e.state.gameCompleted||e.setState((function(e){return{totalTimeTaken:e.totalTimeTaken+1,points:Math.floor((e.totalTimeTaken+1)/10)}}))}),1e3),this.state.isMuted||this.bgMusicPlayer.play().catch((function(e){console.error("Autoplay failed:",e)}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.bgMusicPlayer.pause(),document.removeEventListener("click",this.handleUserInteraction)}},{key:"componentDidUpdate",value:function(e){e.tileDistributions===this.props.tileDistributions&&e.levelValue===this.props.levelValue&&e.complexity===this.props.complexity||(console.log("Updated Complexity:",this.props.complexity),this.setState({tileDistributions:this.props.tileDistributions,levelValue:this.props.levelValue,complexity:this.props.complexity},this.initializeGameData))}},{key:"render",value:function(){var e=this,n=this.getCompletionImage();return(0,j.jsxs)("div",{id:"game-container",children:[(0,j.jsx)("div",{id:"game-board"}),(0,j.jsx)("p",{id:"timer",children:"".concat(Math.floor(this.state.totalTimeTaken/60),":").concat(String(this.state.totalTimeTaken%60).padStart(2,"0"))}),(0,j.jsx)("img",{src:S,alt:"Additional Control",className:"top-left-gif",onClick:this.handleHelperImageClick}),this.state.showSecondImage&&(0,j.jsxs)("div",{className:"second-image-container",children:[(0,j.jsx)("button",{className:"close-button",onClick:function(){return e.setState({showSecondImage:!1})},children:"✖"}),(0,j.jsx)("img",{src:M,alt:"Second Image",className:"second-image"})]}),(0,j.jsx)("img",{src:this.state.isMuted?W:K,alt:"Mute/Unmute",className:"mute-unmute-icon",onClick:this.toggleMute}),this.state.showCompletion&&(0,j.jsxs)("div",{className:"second-image-container",children:[(0,j.jsx)("img",{src:n,alt:"Game Completed",className:"second-image"}),(0,j.jsx)("p",{className:"time-taken",children:"".concat(this.state.score)})]})]})}}])}(s.Component);var ee=t(5338),ne=function(){var e=(0,s.useState)([]),n=(0,i.A)(e,2),t=n[0],o=n[1],c=(0,s.useState)(2),u=(0,i.A)(c,2),m=u[0],p=u[1],g=(0,s.useRef)(!1),h=(0,s.useState)("Unknown"),f=(0,i.A)(h,2),v=f[0],b=f[1];(0,s.useEffect)((function(){var e=function(e){if(e.data&&e.data.levelValue){var n=e.data.levelValue;p(n),console.log("Received levelValue:",n)}else console.warn("Invalid message received:",e.data)};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[]),(0,s.useEffect)((function(){g.current||(g.current=!0,x(m))}),[m]);var x=function(){var e=(0,a.A)(r().mark((function e(n){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Fetching tile data with level:",n),e.next=4,d().get("https://academy.karky.in:8882/api/activity/games/memory?level=".concat(n,"&uid=chezhiyank@gmail.com"));case 4:t=e.sent,console.log("API Response:",t.data),Array.isArray(t.data)&&t.data.length>0?(a=t.data[0]).tilesDistribution?(o([a.tilesDistribution]),b(a.complexity||"Unknown")):console.error("No tile data received from the API."):console.error("Invalid response structure or empty array."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching tile data:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,j.jsx)(l.HashRouter,{basename:"MISSING_ENV_VAR".PUBLIC_URL,future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,j.jsxs)(l.Routes,{children:[(0,j.jsx)(l.Route,{path:"/",element:(0,j.jsx)(z,{})}),(0,j.jsx)(l.Route,{path:"/game",element:(0,j.jsx)(Z,{tileDistributions:t,levelValue:m,complexity:v})})]})})},te=document.getElementById("app");if(!te)throw new Error("Failed to find the root element");ee.createRoot(te).render((0,j.jsx)(ne,{}));const ae=ne},4268:(e,n,t)=>{t.d(n,{A:()=>g});var a=t(1601),i=t.n(a),o=t(6314),r=t.n(o),s=t(4417),l=t.n(s),c=new URL(t(1108),t.b),d=new URL(t(1464),t.b),u=r()(i()),m=l()(c),p=l()(d);u.push([e.id,`/* Full page background image */\n.landing-container {\n  position: relative;\n  height: 100vh; /* Full viewport height */\n  width: 100vw; /* Full viewport width */\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  background-image: url(${m}); /* Replace with your background image */\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-position: center;\n}\n\n.background-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh; \n  background-image: url(${m}); /* Replace with your background image */\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n/* Centered Image */\n@keyframes fadeInOut {\n  0% { opacity: 0; }\n  50% { opacity: 1; }\n  100% { opacity: 0; }\n}\n\n@keyframes zoomInOut {\n  0% { transform: scale(1); }   \n  50% { transform: scale(1.2); } \n  100% { transform: scale(1); }  \n}\n\n.start-gif1 {\n  width: 150px;\n  height: 150px;\n  background-image: url(${p});\n  cursor: pointer;\n  background-size: contain;\n  background-repeat: no-repeat;\n  animation: zoomInOut 2s infinite ease-in-out;\n}\n\n\n/* Top Left GIF */\n.top-left-gif {\n  position: fixed;\n  top: 4vh;\n  left: 1vw;\n  width: 6vw;\n  cursor: pointer;\n  transition: transform 0.2s ease-in-out;\n}\n\n/* Centered Image Container */\n.second-image-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  inset: 0;\n  z-index: 1000;\n  padding: 2vh;\n}\n.close-button {\n  position: absolute;\n  top: 5vh;\n  left:2vw;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  border: 2px solid white;\n  border-radius: 50%;\n  width: 2.5rem;\n  height: 2.5rem;\n  font-size: 1.2rem;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1100;\n}\n/* Responsive Image */\n.second-image {\n  width: 102vw;\n  max-width: 1024px;\n  object-fit: contain;\n  border-radius: 15px;\n}\n`,""]);const g=u},8972:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(1601),i=t.n(a),o=t(6314),r=t.n(o)()(i());r.push([e.id,"body {\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.container {\n  font-size: 3rem;\n  margin: auto;\n  max-width: 800px;\n  margin-top: 20px;\n}",""]);const s=r},4325:(e,n,t)=>{t.d(n,{A:()=>m});var a=t(1601),i=t.n(a),o=t(6314),r=t.n(o),s=t(4417),l=t.n(s),c=new URL(t(6528),t.b),d=r()(i()),u=l()(c);d.push([e.id,`\n\n\nbody {\n  background-image: url(${u});\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-attachment: fixed;\n  overflow-x: hidden;  /* Prevents unwanted horizontal scroll */\n  overflow-y: auto;    /* Allows vertical scrolling if needed */\n  margin: 0;\n  padding: 0;\n}\n\n/* Game Container */\n#game-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 10vh;\n  border-radius: 10px;\n  height: 70vh;\n  position: relative;\n}\n\n\n#timer {\n  position: fixed;\n  font-size: 1.4rem;\n  color: #000;\n  left: 13%;\n  top: 78%;\n  z-index: 1000;\n}\n\n/* Keep the game-board unchanged */\n#game-board {\n  display: grid;\n  grid-template-columns: repeat(4, 100px);\n  gap: 5px;\n  border-radius: 10px;\n  width: fit-content;\n  height: fit-content;\n  margin: auto;\n}\n.tile {\n  width: 100px;\n  height: 80px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.6em;\n  font-weight: bold;\n  color: #c96364;\n  background-color: white;\n  background-size: cover;\n  background-position: center;\n  cursor: pointer;\n  border-radius: 12px;\n  box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.15);\n  transition: transform 0.3s, background-color 0.3s;\n}\n\n.tile.flipped {\n  background-color: white;\n  /* White background when flipped */\n}\n\n.tile.matched {\n  background-color: green;\n  color: #c96364;\n}\n\n.tile:hover {\n  transform: scale(1.1);\n}\n\n/* Top Left GIF */\n.top-left-gif {\n  position: fixed;\n  top: 4vh;\n  left: 1vw;\n  width: 6vw;\n  cursor: pointer;\n  transition: transform 0.2s ease-in-out;\n}\n\n/* Centered Image Container */\n.second-image-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  inset: 0;\n  z-index: 1000;\n  padding: 2vh;\n}\n.close-button {\n  position: absolute;\n  top: 5vh;\n  left:2vw;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  border: 2px solid white;\n  border-radius: 50%;\n  width: 2.5rem;\n  height: 2.5rem;\n  font-size: 1.2rem;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1100;\n}\n/* Responsive Image */\n.second-image {\n  width: 102vw;\n  max-width: 1024px;\n  object-fit: contain;\n  border-radius: 15px;\n}\n\n/* Mute/Unmute Icon */\n.mute-unmute-icon {\n  position: fixed;\n  bottom: 5vh;\n  right: 1vw;\n  cursor: pointer;\n}\n\n/* Time Taken */\n.time-taken {\n  position: absolute;\n  top: 69%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 2rem;\n  color: #ffff;\n  font-weight: bold;\n}\n`,""]);const m=d},1464:(e,n,t)=>{e.exports=t.p+"images/game-control.png"},1108:(e,n,t)=>{e.exports=t.p+"images/intro-img.png"},6528:(e,n,t)=>{e.exports=t.p+"images/start.png"}}]);